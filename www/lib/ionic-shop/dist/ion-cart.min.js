!function(t){var e=t.module("ionicShop.services",["ionic"]);e.service("Products",["$http",function(t){this.galleryProducts=[],this.cartProducts=[],this.checkout={},this.addToCart=function(t){var e=!1;this.cartProducts.forEach(function(i){return i.id===t.id?void(e=i):void 0}),e?this.addOneProduct(e):(t.purchaseQuantity=0,this.addOneProduct(t),this.cartProducts.push(t))},this.removeProduct=function(t){this.cartProducts.forEach(function(e,i){t.id===e.id&&(this.cartProducts.splice(i,1),this.updateTotal())}.bind(this))},this.addOneProduct=function(t){--t.quantity,++t.purchaseQuantity,this.updateTotal()},this.removeOneProduct=function(t){++t.quantity,--t.purchaseQuantity,this.updateTotal()},this.cartTotal=function(){var t=0;return this.cartProducts.forEach(function(e){t+=e.price*e.purchaseQuantity}),e(t)};var e=function(t){return t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")};this.updateTotal=function(){this.total=this.cartTotal()}.bind(this),this.updateTotal(),this.getProducts=function(e){t.get("/admin/panel/products").success(function(t){this.galleryProducts=t,e&&e()}.bind(this))}}]),e.service("CheckoutValidation",function(){this.validateCreditCardNumber=function(t){return Stripe.card.validateCardNumber(t)},this.validateExpiry=function(t,e){return Stripe.card.validateExpiry(t,e)},this.validateCVC=function(t){return Stripe.card.validateCVC(t)},this.validateEmail=function(t){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},this.validateZipcode=function(t){var e=/(^\d{5}$)|(^\d{5}-\d{4}$)/;return e.test(t)},this.checkAll=function(t){if(0===Object.keys(t).length)return!1;for(var e in t){if("cc"===e&&!this.validateCreditCardNumber(t[e]))return!1;if("exp"===e&&!this.validateExpiry(t[e].slice(0,2),t[e].slice(3)))return!1;if("cvc"===e&&!this.validateCVC(t[e]))return!1;if("email"===e&&!this.validateEmail(t[e]))return!1;if("zipcode"===e&&!this.validateZipcode(t[e]))return!1}return!0}.bind(this)}),e.service("stripeCheckout",["Products","CheckoutValidation","$http",function(t,e,i){this.setStripeKey=function(t){Stripe.setPublishableKey(t)},this.setStripeTokenCallback=function(){},this.processCheckout=function(t,e){var i=t.cc,n=t.exp.slice(0,2),c=t.exp.slice(3),a=t.cvc;Stripe.card.createToken({number:i,cvc:a,exp_month:n,exp_year:c},e)},this.stripeCallback=function(t,e){this.setStripeTokenCallback(t,e)}.bind(this)}])}(angular),function(t){var e=t.module("ionicShop.directives",["ionic","ionicShop.services"]);e.directive("ionCart",["Products","$templateCache",function(t){var e=function(e){e.$watch("products.length",function(i){t.updateTotal(),e.emptyProducts=i>0?!1:!0}),e.emptyProducts=e.products.length?!1:!0,e.addProduct=function(e){t.addOneProduct(e)},e.removeProduct=function(e){e.purchaseQuantity<=1?t.removeProduct(e):t.removeOneProduct(e)}};return{restrict:"AEC",templateUrl:"cart-item.html",link:e,scope:{products:"="}}}]),e.directive("ionProductImage",["$timeout","$ionicModal","$ionicSlideBoxDelegate","$templateCache",function(t,e,i){var n=function(n,c){n.closeModal=function(){n.modal.hide(),n.modal.remove()},c.on("click",function(){e.fromTemplateUrl("partials/cart-image-modal.html",{animation:"slide-left-right",scope:n}).then(function(e){n.modal=e,n.modal.show(),t(function(){i.update()})})})};return{restrict:"A",link:n,scope:"="}}]),e.directive("ionCartFooter",["$state","$templateCache",function(t){var e=function(e,i){i.addClass("bar bar-footer bar-dark"),i.on("click",function(){e.path&&t.go(e.path)}),i.on("touchstart",function(){i.css({opacity:.8})}),i.on("touchend",function(){i.css({opacity:1})})};return{restrict:"AEC",templateUrl:"cart-footer.html",scope:{path:"=path"},link:e}}]),e.directive("ionCheckout",["Products","$templateCache",function(t){var e=function(e,i){e.$watch(function(){return t.total},function(){e.total=t.total}),e.checkout=t.checkout,e.total=t.total,i[0].hasAttribute("has-address")&&(e.hasAddressDir=!0),i[0].hasAttribute("has-email")&&(e.hasEmailDir=!0),i[0].hasAttribute("has-name")&&(e.hasNameDir=!0)};return{restrict:"AEC",templateUrl:"checkout.html",link:e}}]),e.directive("ionGallery",["Products","$templateCache",function(t){var e=function(e){e.addToCart=function(e){t.addToCart(e)}};return{restrict:"AEC",templateUrl:"gallery-item.html",link:e,scope:{products:"="}}}]),e.directive("ionCheckoutFooter",["$compile","Products","stripeCheckout","CheckoutValidation","$templateCache",function(e,i,n,c){var a=function(e,a){e.checkout=i.checkout,e.processCheckout=n.processCheckout,e.stripeCallback=n.stripeCallback,a.addClass("bar bar-footer bar-dark"),a.on("click",function(){if(c.checkAll(e.checkout))e.processCheckout(e.checkout,e.stripeCallback);else{var i=document.getElementsByTagName("ion-checkout")[0].children[0];t.element(i).html("You have invalid fields:").css({color:"#ED303C",opacity:1})}}),a.on("touchstart",function(){a.css({opacity:.8})}),a.on("touchend",function(){a.css({opacity:1})})};return{restrict:"AEC",templateUrl:"checkout-footer.html",link:a}}]),e.directive("checkoutCard",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/card-form.html"}}]),e.directive("cardNumInput",["$timeout","CheckoutValidation","$templateCache",function(e,i){var n=function(n,c){var a=(c.children()[0].children[0],c.children()[0].children[1]);n.onNumBlur=function(){n.checkout.cc&&(t.element(a).removeClass("ion-card"),t.element(a).addClass("ion-loading-d"),e(function(){return i.validateCreditCardNumber(n.checkout.cc)?(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-checkmark-round").css({color:"#1fda9a"})):(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-close-round").css({color:"#ED303C"}))},300))},n.onNumFocus=function(){t.element(a).removeClass("ion-checkmark-round ion-close-round"),t.element(a).addClass("ion-card").css({color:"#333"})}};return{restrict:"AE",link:n,templateUrl:"partials/card-num-input.html"}}]),e.directive("cardExpInput",["$timeout","CheckoutValidation","$templateCache",function(e,i){var n=function(n,c){var a=(c.children()[0].children[0],c.children()[0].children[1]);n.onExpBlur=function(){n.checkout.exp&&(t.element(a).addClass("ion-loading-d"),e(function(){return n.checkout.exp&&i.validateExpiry(n.checkout.exp.slice(0,2),n.checkout.exp.slice(3))?(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-checkmark-round").css({color:"#1fda9a"})):(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-close-round").css({color:"#ED303C"}))},300))},n.onExpFocus=function(){t.element(a).removeClass("ion-checkmark-round ion-close-round").css({color:"#333"})}};return{restrict:"AE",link:n,templateUrl:"partials/card-exp-input.html"}}]),e.directive("cardCvcInput",["$timeout","CheckoutValidation","$templateCache",function(e,i){var n=function(n,c){var a=(c.children()[0].children[0],c.children()[0].children[1]);n.onCvcBlur=function(){n.checkout.cvc&&(t.element(a).addClass("ion-loading-d"),e(function(){return i.validateCVC(n.checkout.cvc)?(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-checkmark-round").css({color:"#1fda9a"})):(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-close-round").css({color:"#ED303C"}))},300))},n.onCvcFocus=function(){t.element(a).removeClass("ion-checkmark-round ion-close-round").css({color:"#333"})}};return{restrict:"AE",link:n,templateUrl:"partials/card-cvc-input.html"}}]),e.directive("checkoutAddress",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/address.html"}}]),e.directive("addressOneInput",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/address-line-one.html"}}]),e.directive("addressTwoInput",["$templateCache",function(){var t=function(t){t.onAddrTwoBlur=function(){},t.onAddrTwoFocus=function(){}};return{restrict:"AE",link:t,templateUrl:"partials/address-line-two.html"}}]),e.directive("cityInput",["$templateCache",function(){var t=function(t){t.onCityBlur=function(){},t.onCityFocus=function(){}};return{restrict:"AE",link:t,templateUrl:"partials/city-input.html"}}]),e.directive("stateInput",["$templateCache",function(){var t=function(t){t.onStateBlur=function(){},t.onStateFocus=function(){}};return{restrict:"AE",link:t,templateUrl:"partials/state-input.html"}}]),e.directive("zipInput",["$timeout","CheckoutValidation","$templateCache",function(e,i){var n=function(n,c){var a=c.children()[0].children[1];n.onZipBlur=function(){n.checkout.zipcode&&(t.element(a).addClass("ion-loading-d"),e(function(){return i.validateZipcode(n.checkout.zipcode)?(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-checkmark-round").css({color:"#1fda9a"})):(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-close-round").css({color:"#ED303C"}))},300))},n.onZipFocus=function(){t.element(a).removeClass("ion-checkmark-round ion-close-round").css({color:"#333"})}};return{restrict:"AE",link:n,templateUrl:"partials/zipcode-input.html"}}]),e.directive("checkoutName",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/name-input.html"}}]),e.directive("lastNameInput",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/first-name-input.html"}}]),e.directive("firstNameInput",["$templateCache",function(){var t=function(){};return{restrict:"AE",link:t,templateUrl:"partials/last-name-input.html"}}]),e.directive("checkoutEmail",["$timeout","CheckoutValidation","$templateCache",function(e,i){var n=function(n,c){var a=c.children()[1].children[1];n.onEmailBlur=function(){n.checkout.email&&(t.element(a).addClass("ion-loading-d"),e(function(){return i.validateEmail(n.checkout.email)?(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-checkmark-round").css({color:"#1fda9a"})):(t.element(a).removeClass("ion-loading-d"),void t.element(a).addClass("ion-close-round").css({color:"#ED303C"}))},300))},n.onEmailFocus=function(){t.element(a).removeClass("ion-checkmark-round ion-close-round").css({color:"#333"})}};return{restrict:"AE",link:n,templateUrl:"partials/email-input.html"}}]),e.directive("mouseDownUp",function(){var t=function(t,e){e.on("touchstart",function(){e.css({opacity:.5})}),e.on("touchend",function(){e.css({opacity:1})})};return{restrict:"AC",link:t}}),e.directive("cartAdd",["$timeout",function(t){var e=function(e,i){e.addText="Add To Cart",i.on("click",function(){e.addText="Added",i.addClass("gallery-product-added"),t(function(){e.addText="Add To Cart",i.removeClass("gallery-product-added")},500)})};return{restrict:"AC",link:e,scope:!0}}])}(angular),function(t){t.module("ionicShop.templates",[]).run(["$templateCache",function(t){t.put("cart-footer.html","<div class='title cart-footer'>Checkout</div>"),t.put("cart-item.html","<div ng-if='!emptyProducts'>\n  <div class='card product-card' ng-repeat='product in products track by $index'>\n    <div class='item item-thumbnail-right product-item'>\n      <img ng-src='{{product.images[0]}}' class='product-image' ion-product-image='product'>\n      <h3 class='product-title'>{{product.title}}</h3>\n      <p class='product-description'>{{product.description}}</p>\n\n      <i class='icon ion-plus-round icon-plus-round' mouse-down-up ng-click='addProduct(product)'></i>\n         <span class='product-quantity'>{{product.purchaseQuantity}}</span>\n      <i class='icon ion-minus-round icon-minus-round' mouse-down-up ng-click='removeProduct(product)'></i>\n\n      <span class='product-price'>${{product.price}}</span>\n    </div>\n  </div>\n  <div>\n    <br><br><br><br>\n  </div>\n</div>\n\n<div class='empty-cart-div' ng-if='emptyProducts'>\n  <h3 class='empty-cart-header'>Your bag is empty!</h3>\n  <i class='icon ion-bag empty-cart-icon'></i>\n</div>"),t.put("checkout-footer.html","<div class='title purchase-footer'>Pay</div>"),t.put("checkout.html","\n<span class='checkout-form-description'>Please enter your credit card details:</span>\n\n<div class='list checkout-form'>\n  <checkout-name ng-if='hasNameDir'></checkout-name>\n  <checkout-card></checkout-card>\n  <checkout-address ng-if='hasAddressDir'></checkout-address>\n  <checkout-email ng-if='hasEmailDir'></checkout-email>\n</div>\n\n<h2 class='checkout-total'>Total: ${{total}}</h2>\n"),t.put("gallery-item.html","<div class='ion-gallery-content'>\n  <div class='card gallery-card' ng-repeat='product in products track by $index'>\n    <div class='item gallery-item'>\n      <div class='gallery-image-div'>\n        <img ng-src='{{product.images[0]}}' class='gallery-product-image'>\n      </div>\n      <h3 class='gallery-product-title'>{{product.title}}</h3>\n      <h3 class='gallery-product-price'>${{product.price}}</h3>\n      <div class='gallery-product-add' ng-click='addToCart(product)'>\n        <h3 class='gallery-product-add-title' cart-add>{{addText}}</h3>\n      </div>\n    </div>\n  </div>\n</div>"),t.put("partials/address-line-one.html","<label class='item item-input address-line-one'>\n  <input type='text' ng-model='checkout.addressLineOne' placeholder='Address Line 1'>\n</label>"),t.put("partials/address-line-two.html","<label class='item item-input address-line-two'>\n  <input type='text' ng-model='checkout.addressLineTwo' placeholder='Address Line 2'>\n</label>"),t.put("partials/address.html","<div class='item item-divider'>Address: </div>\n<address-one-input></address-one-input>\n<address-two-input></address-two-input>\n<city-input></city-input>\n<state-input></state-input>\n<zip-input></zip-input>\n"),t.put("partials/card-cvc-input.html","<label class='item item-input card-cvc-input'>\n  <input type='tel' ng-model='checkout.cvc' ng-focus='onCvcFocus()' ng-blur='onCvcBlur()' placeholder='CVC'>\n  <i class=\"icon\" style='width: 40px; text-align: center;'></i>\n</label>"),t.put("partials/card-exp-input.html","<label class='item item-input card-exp-input'>\n  <input type='tel' ng-model='checkout.exp' ng-focus='onExpFocus()' ng-blur='onExpBlur()' placeholder='MM/YYYY'>\n  <i  class=\"icon\" style='width: 40px; text-align: center;'></i>\n</label>"),t.put("partials/card-form.html","<div class='item item-divider'>Card Info: </div>\n<card-num-input></card-num-input>\n<card-exp-input></card-exp-input>\n<card-cvc-input></card-cvc-input>"),t.put("partials/card-num-input.html","<label class='item item-input card-num-input'>\n  <input type='tel' ng-model='checkout.cc' ng-focus='onNumFocus()' ng-blur='onNumBlur()' placeholder='Credit Card Number'>\n  <i  class=\"icon ion-card\" style='width: 40px; text-align: center;'></i>\n</label>"),t.put("partials/cart-image-modal.html","<div class=\"modal image-slider-modal\">\n\n  <ion-header-bar>\n    <button class=\"button button-light icon ion-ios7-undo-outline\" ng-click='closeModal()'></button>\n    <h1 class=\"title\">More Images</h1>\n    \n  </ion-header-bar>\n\n    <ion-slide-box class='image-slider-box' does-continue='true'>\n      <ion-slide ng-repeat='image in product.images' class='image-ion-slide'>\n        <ion-content>\n          <div class='image-slide-div'>\n            <h3 class='image-slide-description'>{{product.description}}</h3>\n            <img src='{{image}}' class='image-slide'>\n          </div>\n        </ion-content>\n      </ion-slide>\n    </ion-slide-box>\n\n</div>"),t.put("partials/city-input.html","<label class='item item-input city-input'>\n  <input type='text' ng-model='checkout.city' placeholder='City'>\n</label>"),t.put("partials/email-input.html",'<div class="item item-divider">E-mail: </div>\n<label class="item item-input email-input">\n  <input type="text" ng-model="checkout.email" ng-focus=\'onEmailFocus()\' ng-blur=\'onEmailBlur()\' placeholder="E-Mail">\n  <i class="icon" style=\'width: 40px; text-align: center;\'></i>\n</label>\n\n'),t.put("partials/first-name-input.html","  <label class='item item-input first-name-input'>\n    <input type='text' ng-model='checkout.lastName' placeholder='Last Name'>\n  </label>"),t.put("partials/last-name-input.html","  <label class='item item-input last-name-input'>\n    <input type='text' ng-model='checkout.firstName' placeholder='First Name'>\n  </label>"),t.put("partials/name-input.html","<div class='item item-divider'>Name: </div>\n<first-name-input></first-name-input>\n<last-name-input></last-name-input>"),t.put("partials/state-input.html","<label class='item item-input state-input'>\n  <input type='text' ng-model='checkout.state' placeholder='State'>\n</label>"),t.put("partials/zipcode-input.html","<label class='item item-input zip-code-input'>\n  <input type='text' ng-model='checkout.zipcode' ng-focus='onZipFocus()' ng-blur='onZipBlur()' placeholder='Zipcode'>\n  <i class=\"icon zip-code-input-icon\" style='width: 40px; text-align: center;'></i>\n</label>")}])}(angular),function(t){t.module("ionicShop",["ionic","ionicShop.services","ionicShop.directives","ionicShop.templates"])}(angular);